<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>баскет сукаа</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        body {
            background: #0b1a24;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Comic Sans MS', 'Chalkboard SE', cursive, sans-serif;
        }
        .game-wrapper {
            background: #1e2f3a;
            padding: 20px 25px 25px;
            border-radius: 60px 60px 40px 40px;
            border: 4px solid #ffb347;
            box-shadow: 0 20px 0 #0f1c24, 0 25px 30px black;
        }
        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 30px;
            background: radial-gradient(circle at 20% 30%, #2e4b5c, #14212b);
            box-shadow: inset 0 -6px 0 #1f3f4e, inset 0 6px 8px #6d9eb5, 0 12px 18px black;
            border: 3px solid #ff9f4b;
            cursor: none;
        }
        .panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding: 0 8px;
        }
        .score-block {
            background: #2e1b0e;
            border-radius: 50px;
            padding: 8px 30px;
            border: 3px solid #f9b81b;
            box-shadow: inset 0 -4px 0 #4a2e18, 0 7px 0 #3b200c;
        }
        .score-block span {
            font-size: 42px;
            font-weight: bold;
            color: #fee7a0;
            text-shadow: 3px 3px 0 #b45f1b;
        }
        .power-meter {
            width: 240px;
            height: 28px;
            background: #23190f;
            border-radius: 40px;
            border: 3px solid #d48b3c;
            overflow: hidden;
            box-shadow: inset 0 4px 6px #040200;
        }
        .power-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #fcd34d, #ef4444, #fcd34d);
            background-size: 200% 100%;
            box-shadow: 0 0 15px #ffaa33;
            transition: width 0.05s linear;
        }
        .hint {
            color: #ffd966;
            font-size: 22px;
            font-weight: bold;
            text-shadow: 3px 3px 0 #7f3f00;
            background: #3b280f;
            padding: 6px 22px;
            border-radius: 40px;
            border: 3px solid #ffb347;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
<div class="game-wrapper">
    <canvas id="gameCanvas" width="800" height="400"></canvas>
    <div class="panel">
        <div class="score-block"><span id="scoreDisplay">0</span></div>
        <div class="power-meter">
            <div class="power-fill" id="powerFill"></div>
        </div>
        <div class="hint">⚡␣</div>
    </div>
</div>

<script>
(function() {
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreSpan = document.getElementById('scoreDisplay');
    const powerFill = document.getElementById('powerFill');

    const startX = 120, startY = 320;
    const hoopX = 650, hoopY = 180;
    const ballRadius = 16;
    const gravity = 0.26;
    const baseSpeed = 18;
    const angle = Math.PI / 4;
    const cosA = Math.cos(angle);
    const sinA = Math.sin(angle);

    const MIN_FORCE = 0.50;
    const MAX_FORCE = 0.70;

    const STATE_IDLE = 'idle';
    const STATE_CHARGING = 'charging';
    const STATE_SHOOTING = 'shooting';

    let state = STATE_IDLE;
    let ball = { x: startX, y: startY, vx: 0, vy: 0 };
    let force = 0;
    let shotForce = 0;
    let score = 0;
    let scoredThisShot = false;

    function resetBall() {
        ball.x = startX;
        ball.y = startY;
        ball.vx = 0;
        ball.vy = 0;
        force = 0;
        shotForce = 0;
        powerFill.style.width = '0%';
        state = STATE_IDLE;
        scoredThisShot = false;
    }

    function shoot() {
        if (state !== STATE_CHARGING) return;
        shotForce = force < 0.15 ? 0.15 : force;
        ball.vx = shotForce * baseSpeed * cosA;
        ball.vy = - shotForce * baseSpeed * sinA;
        state = STATE_SHOOTING;
        scoredThisShot = false;
        force = 0;
        powerFill.style.width = '0%';
    }

    function update() {
        if (state === STATE_CHARGING) {
            force = Math.min(1, force + 0.028);
            powerFill.style.width = (force * 100) + '%';
        }

        if (state === STATE_SHOOTING) {
            ball.x += ball.vx;
            ball.y += ball.vy;
            ball.vy += gravity;

            if (!scoredThisShot) {
                const dx = Math.abs(ball.x - hoopX);
                const dy = Math.abs(ball.y - hoopY);
                if (dx < 25 && dy < 30 && ball.vy > 0) {
                    if (shotForce >= MIN_FORCE && shotForce <= MAX_FORCE) {
                        score++;
                        scoreSpan.textContent = score;
                    }
                    scoredThisShot = true;
                }
            }

            if (ball.y > canvas.height + ballRadius*2 || ball.x > canvas.width + ballRadius*2 || ball.x < -ballRadius*2) {
                resetBall();
            }
            if (ball.y > canvas.height - 20 && state === STATE_SHOOTING) {
                resetBall();
            }
        }

        draw();
        requestAnimationFrame(update);
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const grad = ctx.createLinearGradient(0, 0, 0, canvas.height);
        grad.addColorStop(0, '#1d3b4c');
        grad.addColorStop(1, '#0c1f2b');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.strokeStyle = '#ffd966';
        ctx.lineWidth = 5;
        ctx.setLineDash([20, 30]);
        ctx.beginPath();
        ctx.moveTo(100, 70);
        ctx.lineTo(700, 70);
        ctx.stroke();
        ctx.setLineDash([]);

        ctx.fillStyle = '#4a3729';
        ctx.shadowColor = '#ffb347';
        ctx.shadowBlur = 12;
        ctx.fillRect(hoopX - 28, hoopY - 80, 20, 140);
        ctx.shadowBlur = 0;
        ctx.shadowColor = 'transparent';
        ctx.strokeStyle = '#f5e56b';
        ctx.lineWidth = 4;
        ctx.strokeRect(hoopX - 28, hoopY - 80, 20, 140);

        ctx.beginPath();
        ctx.arc(hoopX, hoopY, 20, 0, Math.PI * 2);
        ctx.strokeStyle = '#fbbf24';
        ctx.lineWidth = 9;
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(hoopX, hoopY, 20, 0, Math.PI * 2);
        ctx.strokeStyle = '#b45309';
        ctx.lineWidth = 3;
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(hoopX-12, hoopY+22);
        ctx.lineTo(hoopX-8, hoopY+50);
        ctx.lineTo(hoopX, hoopY+52);
        ctx.lineTo(hoopX+8, hoopY+50);
        ctx.lineTo(hoopX+12, hoopY+22);
        ctx.strokeStyle = '#c9a959';
        ctx.lineWidth = 3;
        ctx.stroke();

        ctx.shadowColor = '#f59e0b';
        ctx.shadowBlur = 20;
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ballRadius, 0, 2 * Math.PI);
        ctx.fillStyle = '#f97316';
        ctx.fill();
        ctx.strokeStyle = '#2d1a0a';
        ctx.lineWidth = 4;
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(ball.x - 15, ball.y - 8);
        ctx.lineTo(ball.x + 15, ball.y + 8);
        ctx.moveTo(ball.x - 15, ball.y + 8);
        ctx.lineTo(ball.x + 15, ball.y - 8);
        ctx.strokeStyle = '#2b1a0e';
        ctx.lineWidth = 4;
        ctx.stroke();
        ctx.shadowBlur = 0;
        ctx.beginPath();
        ctx.arc(ball.x - 5, ball.y - 5, 4, 0, 2 * Math.PI);
        ctx.fillStyle = '#fff8e7';
        ctx.globalAlpha = 0.5;
        ctx.fill();
        ctx.globalAlpha = 1;

        ctx.font = 'bold 20px "Comic Sans MS", cursive';
        ctx.fillStyle = '#fee08b';
        ctx.shadowColor = '#b95f17';
        ctx.shadowBlur = 8;
        ctx.fillText('✓', 570, 120);
        ctx.fillText('✓', 590, 100);
        ctx.shadowBlur = 0;
    }

    window.addEventListener('keydown', e => {
        if (e.code === 'Space') {
            e.preventDefault();
            if (state === STATE_IDLE) {
                state = STATE_CHARGING;
                force = 0;
                powerFill.style.width = '0%';
            }
        }
    });

    window.addEventListener('keyup', e => {
        if (e.code === 'Space') {
            e.preventDefault();
            shoot();
        }
    });

    window.addEventListener('contextmenu', e => e.preventDefault());

    resetBall();
    requestAnimationFrame(update);
})();
</script>
</body>
</html>